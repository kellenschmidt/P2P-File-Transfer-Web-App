<main>
  <mat-horizontal-stepper [linear]="true" #stepper>
    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup">
        <ng-template matStepLabel>Share link</ng-template>
        
        <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
        <div class="">
          <span class="link-display">http://{{ipAddress}}/{{connectionUrl}}<a (click)="copy('http://' + ipAddress + '/' + connectionUrl)" matTooltip="Copy short URL"><i class="glyphicon glyphicon-copy"></i></a></span>
        </div>
        <br>
        <button (click)="cancelTransfer()" routerLink="/cancel" class="btn btn-danger text-left">Cancel</button>
        
        <!-- Button trigger modal -->
        <button type="button" data-toggle="modal" data-target="#locationApprovalModal" class="btn btn-success">
          Approve
        </button>
          
        <!-- Modal -->
        <div *ngIf="receiverLocation != null" class="modal fade" id="locationApprovalModal" tabindex="-1" role="dialog" aria-labelledby="locationApprovalModalLabel" aria-hidden="true">
          <app-transfer-approval [city]="receiverLocation?.city || ''" [state]="receiverLocation?.state || ''" [country]="receiverLocation?.country || ''" [latitude]="receiverLocation?.latitude || 0" [longitude]="receiverLocation?.longitude || 0" (approval)="handleApproval($event)"></app-transfer-approval>
        </div>

      </form>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel>Complete</ng-template>
      
      <p>Your file was successfully transfered.</p>
      
    </mat-step>
  </mat-horizontal-stepper>
</main>
